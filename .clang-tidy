# ======================
# 基础配置
# ======================
Checks: >
  -*,
  bugprone-*,
  cert-*,
  clang-analyzer-*,
  cppcoreguidelines-*,
  modernize-*,
  performance-*,
  readability-*,
  
  # 排除过于激进或特定场景的检查
  -bugprone-easily-swappable-parameters,
  -cppcoreguidelines-avoid-magic-numbers,
  -cppcoreguidelines-pro-bounds-pointer-arithmetic,
  -cppcoreguidelines-pro-type-vararg,
  -modernize-use-trailing-return-type,
  -readability-identifier-length,
  -readability-magic-numbers,
  -readability-function-cognitive-complexity

WarningsAsErrors: '*'  # 将所有警告视为错误
HeaderFilterRegex: '.*' # 检查所有头文件
FormatStyle: file      # 使用项目的.clang-format配置

# ======================
# 检查选项定制
# ======================
CheckOptions:
  # 现代C++特性配置
  - key: modernize-use-nodiscard.AllowedTypes
    value: '.*'
  - key: modernize-use-nullptr.ReplacementType
    value: 'nullptr'
    
  # 性能优化配置
  - key: performance-for-range-copy.AllowedTypes
    value: 'std::.*'
  - key: performance-unnecessary-value-param.AllowedTypes
    value: '.*'
    
  # 可读性配置
  - key: readability-identifier-naming.ClassCase
    value: CamelCase
  - key: readability-identifier-naming.VariableCase
    value: camelBack
  - key: readability-identifier-naming.ConstexprVariableCase
    value: UPPER_CASE
    
  # CERT规则例外
  - key: cert-err58-cpp.WarnOnlyOnThrowInDestructors
    value: 'true'
    
  # 第三方库排除
  - key: clang-diagnostic-*.IgnoreHeaders
    value: '1'

# ======================
# 语言特性配置
# ======================
FormatStyleOptions:
  Standard: Latest     # 自动检测最新C++标准
  UseAuto: true        # 鼓励使用auto
  AllowShortFunctionsOnASingleLine: InlineOnly
  AllowShortIfStatementsOnASingleLine: WithoutElse

# ======================
# 项目特定覆盖
# ======================
# 对于遗留代码库添加以下配置：
# InheritParentConfig: true
# 
# 对于嵌入式系统添加：
# - key: misc-non-private-member-variables-in-classes.IgnoreClassesWithAllMemberVariablesPublic
#   value: 'true'